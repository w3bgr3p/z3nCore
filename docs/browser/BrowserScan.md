
Класс **BrowserScan** предназначен для автоматизации сбора и коррекции параметров браузера с помощью сервиса browserscan.net. Позволяет сохранять отпечатки браузера (WebGL, аудио, шрифты, таймзона и др.) в базу данных, анализировать score, выявлять проблемы и автоматически исправлять таймзону через управление настройками ZennoPoster Instance.

---

### Пример использования

```csharp
// Создание экземпляра с логированием
var scan = new BrowserScan(project, instance, log: true);

// Сбор и сохранение отпечатков браузера
scan.ParseStats();

// Получение score и списка проблем
string result = scan.GetScore();

// Автоматическая коррекция таймзоны браузера
scan.FixTime();
```


---

## Описание конструктора

```csharp
public BrowserScan(IZennoPosterProjectModel project, Instance instance, bool log = false)
```

- **instance**: Экземпляр браузера для управления вкладкой и настройками.
- **log**: Включает детальное логирование всех действий BrowserScan.

---

## Описание методов

### ParseStats

```csharp
public void ParseStats()
```

**Назначение:**

- Создаёт таблицу и структуру для хранения отпечатков браузера.
- Загружает страницу browserscan.net и ожидает полной загрузки.
- Извлекает значения параметров (WebGL, WebGLReport, Audio, ClientRects, WebGPUReport, Fonts, TimeZoneBasedonIP, TimeFromIP) из DOM.
- Сохраняет полученные значения в таблицу базы данных.

---

### GetScore

```csharp
public string GetScore()
```

**Назначение:**

- Загружает страницу browserscan.net и ожидает завершения анализа.
- Извлекает итоговый score (например, "98%") и, если есть проблемы, формирует строку с их описанием.
- Возвращает строку вида: `[score] Проблема1: описание; Проблема2: описание; ...`

---

### FixTime

```csharp
public void FixTime()
```

**Назначение:**

- Загружает страницу browserscan.net и извлекает значения TimeZoneBasedonIP и TimeFromIP.
- Определяет нужный смещение и название таймзоны.
- Устанавливает эмуляцию таймзоны и IANA timezone в Instance на основе полученных данных.

---

## Вспомогательные (внутренние) методы

- `AddTable()`: Создаёт и приводит к актуальной структуре таблицу для хранения отпечатков браузера.
- `LoadStats()`: Загружает страницу browserscan.net, ожидает окончания анализа, логирует этапы загрузки.

---

## Особенности

- Все параметры и результаты сохраняются в таблицу базы данных проекта.
- Таймзона выставляется автоматически на основании анализа browserscan.net.
- Поддерживается детальное логирование этапов и ошибок.
- Использует регулярные выражения для парсинга значений из DOM.

---
