

Класс `Capcha` содержит методы для автоматизации решения капч в ZennoPoster:

- автоматическое решение Cloudflare Turnstile через браузер,
- интеграция с сервисом Cap.Guru через подпроект с автоматической подстановкой API-ключа.

---

### Пример использования

```csharp
// Решение Cloudflare Turnstile на текущей вкладке
instance.CFSolve();

// Решение капчи через Cap.Guru (запуск подпроекта с подстановкой ключа)
bool ok = project.CapGuru();
```


---

## Описание методов

### CFSolve

```csharp
public static void CFSolve(this Instance instance)
```

- Ищет элемент с id `cf-turnstile` на активной вкладке.
- Имитирует нажатие на координаты внутри элемента для прохождения проверки.
- Использует небольшую задержку для имитации действий пользователя.

---

### CapGuru

```csharp
public static bool CapGuru(this IZennoPosterProjectModel project)
```

- Получает API-ключ Cap.Guru из базы данных (`private_api`, ключ `"capguru"`).
- Сохраняет ключ в контекст проекта (`project.Context["capguru_key"]`).
- Декодирует встроенный base64-плагин Cap.Guru, сохраняет во временный файл в папке Temp.
- Потокобезопасно запускает подпроект ZennoPoster для решения капчи.
- После выполнения удаляет временный файл.
- Возвращает результат выполнения (true — успешно, false — ошибка).

---

## Вспомогательные (внутренние) методы

- `getplugin()`: Возвращает base64-строку подпроекта Cap.Guru.
- `LockObject`: Обеспечивает потокобезопасность при запуске подпроекта.

---

## Особенности

- Решение Cloudflare Turnstile реализовано через эмуляцию действий пользователя в браузере.
- Для Cap.Guru не требуется ручная установка плагина или хранение ключа в коде — всё берётся из базы и автоматически подставляется.
- Временный файл подпроекта удаляется после выполнения.
- Решение потокобезопасно: одновременно не может быть запущено несколько подпроектов Cap.Guru.
- Все действия с файлами и запуском подпроекта обёрнуты в try-finally для гарантированной очистки.

---


