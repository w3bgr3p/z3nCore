

## Init

Класс **Init** предназначен для инициализации и подготовки окружения проекта: управления переменными, настройкой браузера, подключением к базе данных, логированием и выполнением базовых проверок перед запуском основной логики.

---

### Пример использования

```csharp
// С браузерным инстансом
var init = new Init(instance, log: true);
init.InitVariables("my_nickname");
init.SetBrowser(strictProxy: true);

// Без инстанса браузера (например, для фоновых задач)
var init = new Init(log: false);
init.InitVariables();
```


---

## Описание конструкторов

```csharp
public Init(Instance instance, bool log = false)
```

- **instance**: Экземпляр браузера для управления браузером и его настройками.
- **log**: Включить или выключить расширенное логирование для этого экземпляра Init.

```csharp
public Init(bool log = false)
```

- **log**: Включить или выключить расширенное логирование, если не требуется управление браузером.

---

## Описание методов

### InitVariables

```csharp
public void InitVariables(string author = "")
```

- **author** (string, необязательный): Никнейм или имя автора скрипта. Используется для вывода подписи в логотипе проекта при инициализации.

**Что делает:**

- Отключает лишние логи.
- Генерирует уникальный идентификатор сессии.
- Определяет имя проекта и версию сборки.
- Заполняет ключевые переменные (`projectName`, `varSessionId`, `nameSpace`, `projectTable`).
- Проверяет наличие обязательных переменных (например, `cfgAccRange`).
- Инициализирует вспомогательные модули.
- Выводит ASCII-логотип проекта с версией и авторством.

---

### SetBrowser

```csharp
public void SetBrowser(bool strictProxy = true, string cookies = null)
```

- **strictProxy** (bool, необязательный): Требовать ли обязательного наличия рабочего прокси. Если true и прокси невалиден — выбрасывается исключение.
- **cookies** (string, необязательный): Строка cookies для установки в браузер. Если не указано — берётся из базы данных или файла.

**Что делает:**

- Устанавливает порт инстанса в переменную.
- Логирует запуск браузера.
- Применяет параметры WebGL из базы.
- Настраивает прокси для браузера.
- Устанавливает cookies из строки, базы или файла, с обработкой ошибок.
- Запускает BrowserScan для проверки и исправления таймзоны, если не установлен флаг пропуска.

---

## Внутренние методы

- **Logo(string author, string dllTitle)**: Формирует и выводит ASCII-логотип с версией, названием сборки и автором.
- **CheckVariables(string[] vars)**: Проверяет наличие и заполненность обязательных переменных, выбрасывает исключение при ошибке.

---

## Особенности

- Все методы автоматически используют контекст проекта.
- Для работы с браузером обязательно передавать `instance` в конструктор.
- Логирование настраивается через параметр `log` и интегрируется с внешним логгером.
- Для работы с cookies и WebGL требуется подключённый модуль Sql и корректно заполненные переменные.

---

**Init** — базовый класс для подготовки среды проекта, автоматизирующий работу с переменными, логированием и браузером.

