# Документация класса Google

## Класс: Google

### Конструктор

#### Google(IZennoPosterProjectModel project, Instance instance, bool log = false)

**Назначение**: Инициализирует новый экземпляр автоматизации Google для работы с аккаунтами Google.

**Пример**:
```csharp
var google = new Google(project, instance, log: true);
```

**Разбор**:
```csharp
// Параметры:
// - project: IZennoPosterProjectModel - Модель проекта для операций с базой данных
// - instance: Instance - Экземпляр браузера для автоматизации
// - log: bool - Включить детальное логирование (по умолчанию: false)
// Возвращает: Экземпляр Google
// Примечание: Автоматически загружает учетные данные из таблицы "_google" при инициализации
```

---

## Методы аутентификации

### Load(bool log = false, bool cookieBackup = true)

**Назначение**: Выполняет полную аутентификацию в аккаунте Google с автоматической обработкой состояний.

**Пример**:
```csharp
string result = google.Load(cookieBackup: true);
if (result == "ok") {
    project.SendInfoToLog("Google успешно аутентифицирован");
}
```

**Разбор**:
```csharp
// Параметры:
// - log: bool - Включить логирование (по умолчанию: false)
// - cookieBackup: bool - Сохранить куки в базу данных при успехе (по умолчанию: true)
// Возвращает: string - Финальное состояние аутентификации ("ok", "phoneVerify", "badBrowser" и т.д.)
// Выбрасывает: Exception для критических ошибок (CAPTCHA, неправильный аккаунт, заблокированный аккаунт)
// Примечание: Автоматически обрабатывает ввод логина, пароля, OTP, запросы восстановления телефона
// Переходит на myaccount.google.com, если еще не на домене Google
```

### State(bool log = false)

**Назначение**: Определяет текущее состояние страницы аккаунта Google и статус аутентификации.

**Пример**:
```csharp
string state = google.State();
if (state == "ok") {
    // Аккаунт вошел и верифицирован
}
```

**Разбор**:
```csharp
// Параметры:
// - log: bool - Включить логирование (по умолчанию: false)
// Возвращает: string - Текущее состояние страницы ("ok", "inputLogin", "inputPassword", "inputOtp", "CAPTCHA", "Disabled" и т.д.)
// Примечание: Проверяет, что вошедший аккаунт соответствует ожидаемым учетным данным
// Возвращает "!WrongAcc", если вошел другой аккаунт
```

### GAuth(bool log = false)

**Назначение**: Обрабатывает аутентификацию Google OAuth на сторонних сайтах, используя существующую сессию Google.

**Пример**:
```csharp
string result = google.GAuth();
project.SendInfoToLog($"Результат OAuth: {result}");
```

**Разбор**:
```csharp
// Параметры:
// - log: bool - Включить логирование (по умолчанию: false)
// Возвращает: string - Результат аутентификации ("SUCCESS with continue", "SUCCESS. without confirmation", "FAIL. Wrong account", "FAIL. No loggined Users Found")
// Примечание: Нажимает на контейнер аккаунта, если найден правильный пользователь
// Обрабатывает OTP при необходимости, нажимает кнопку Continue
// Очищает куки, если обнаружен неправильный аккаунт
```

---

## Управление данными

### SaveCookies()

**Назначение**: Сохраняет куки сессии Google в базу данных для сохранения между сессиями.

**Пример**:
```csharp
google.SaveCookies();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Примечание: Сначала переходит на YouTube, чтобы убедиться, что все куки Google установлены
// Сохраняет куки для всех доменов Google (используя маску ".")
// Обновляет таблицу "_google" со статусом и куками
```

### ParseSecurity()

**Назначение**: Извлекает и сохраняет информацию о настройках безопасности аккаунта Google.

**Пример**:
```csharp
google.ParseSecurity();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Примечание: Переходит на https://myaccount.google.com/security при необходимости
// Извлекает статус: Двухэтапной верификации, Пароля, Пропуска пароля, Аутентификатора, Телефона восстановления, Email восстановления, Резервных кодов
// Сохраняет отформатированную информацию о безопасности в таблицу "__google"
```
