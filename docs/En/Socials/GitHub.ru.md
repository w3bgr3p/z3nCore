# Документация класса GitHub

## Класс: GitHub

### Конструктор

#### GitHub(IZennoPosterProjectModel project, Instance instance, bool log = false)

**Назначение**: Инициализирует новый экземпляр автоматизации GitHub с контекстом проекта и экземпляром браузера.

**Пример**:
```csharp
var github = new GitHub(project, instance, log: true);
```

**Разбор**:
```csharp
// Параметры:
// - project: IZennoPosterProjectModel - Модель проекта для операций с базой данных
// - instance: Instance - Экземпляр браузера для автоматизации
// - log: bool - Включить логирование (по умолчанию: false)
// Возвращает: Экземпляр GitHub
// Примечание: Автоматически загружает учетные данные из таблицы "_github"
```

---

## Управление учетными данными

### LoadCreds()

**Назначение**: Загружает учетные данные GitHub из базы данных в переменные экземпляра.

**Пример**:
```csharp
github.LoadCreds();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Выбрасывает: Exception если логин или пароль пусты
// Примечание: Загружает статус, логин, пароль, секрет 2FA, email и куки из таблицы "_github"
// Также заполняет переменные проекта загруженными учетными данными
```

---

## Методы аутентификации

### Go()

**Назначение**: Переходит на страницу входа GitHub и обрабатывает согласие с куками.

**Пример**:
```csharp
github.Go();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Примечание: Переходит на https://github.com/login
// Автоматически нажимает кнопку "Accept", если она присутствует (таймаут 2 секунды)
```

### InputCreds()

**Назначение**: Вводит учетные данные в форму входа GitHub.

**Пример**:
```csharp
github.InputCreds();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Выбрасывает: Exception если появляется сообщение об ошибке/предупреждение
// Примечание: Вводит email и пароль, нажимает кнопку отправки
// Автоматически обрабатывает ввод 2FA при необходимости
```

### Load()

**Назначение**: Выполняет полную аутентификацию в GitHub с автоматической обработкой состояний и валидацией.

**Пример**:
```csharp
string currentUser = github.Load();
project.SendInfoToLog($"Вошел как: {currentUser}");
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: string - Текущее имя пользователя
// Выбрасывает: Exception если обнаружен неправильный аккаунт или неверные учетные данные
// Примечание: Переходит на страницу входа, вводит учетные данные, обрабатывает верификацию 2FA
// Проверяет, что вошедший аккаунт совпадает с ожидаемым именем пользователя
// Автоматически сохраняет куки при успешном входе
```

### Verify2fa()

**Назначение**: Обрабатывает процесс верификации 2FA при запросе во время входа.

**Пример**:
```csharp
github.Verify2fa();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Примечание: Нажимает кнопку "Verify 2FA now", ожидает 20 секунд
// Генерирует и вводит OTP код из секрета 2FA
// Нажимает основную кнопку и кнопку "Done" для завершения верификации
```

### Current()

**Назначение**: Получает имя текущего авторизованного пользователя GitHub.

**Пример**:
```csharp
string username = github.Current();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: string - Текущее имя пользователя
// Примечание: Нажимает на аватар, получает имя пользователя из области навигации пользователя
// Возвращается на главную страницу нажатием на логотип GitHub
```

---

## Управление аккаунтом

### ChangePass(string password = null)

**Назначение**: Инициирует процесс сброса пароля через email.

**Пример**:
```csharp
github.ChangePass();
```

**Разбор**:
```csharp
// Параметры:
// - password: string - Новый пароль (опционально, использует переменную проекта если null)
// Возвращает: void
// Примечание: Запрашивает сброс пароля, решает капчу при необходимости
// Получает ссылку для сброса из email, устанавливает новый пароль
// Обрабатывает 2FA во время смены пароля, если включено
```

### SaveCookies()

**Назначение**: Сохраняет текущие куки браузера в базу данных для сохранения сессии.

**Пример**:
```csharp
github.SaveCookies();
```

**Разбор**:
```csharp
// Параметры: Отсутствуют
// Возвращает: void
// Примечание: Использует вспомогательный класс Cookies для сохранения куков в базу данных проекта
```
