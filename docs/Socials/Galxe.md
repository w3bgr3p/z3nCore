

##  Galxe

### Назначение

Класс `Galxe` реализует автоматизацию сбора и анализа данных с платформы Galxe (galxe.com) в ZennoPoster. Позволяет парсить задачи пользователя на странице, получать базовую информацию о пользователе через GraphQL API, а также извлекать баллы лояльности для адреса в рамках определённого пространства (space). Поддерживает работу с прокси, логирование и гибкую фильтрацию задач.

### Примеры использования

```csharp
// Создание экземпляра с логированием
var galxe = new Galxe(project, instance, log: true);

// Получить список невыполненных задач
var tasks = galxe.ParseTasks("tasksUnComplete");

// Получить базовую информацию о пользователе
string userInfo = galxe.BasicUserInfo(token, address);

// Получить баллы лояльности для адреса в конкретном пространстве
string points = galxe.GetLoyaltyPoints("spaceAlias", "0x123...");
```


## Описание методов

### ParseTasks

```csharp
public List<HtmlElement> ParseTasks(string type = "tasksUnComplete", bool log = false)
```

- Парсит задачи на странице Galxe пользователя.
- **type** — тип возвращаемых задач:
    - `"tasksComplete"` — выполненные задачи
    - `"tasksUnComplete"` — невыполненные задачи
    - `"reqComplete"` — выполненные требования
    - `"reqUnComplete"` — невыполненные требования
    - `"refComplete"` — выполненные реферальные задачи
    - `"refUnComplete"` — невыполненные реферальные задачи
- Логирует количество найденных задач каждого типа.
- Возвращает список элементов задач выбранного типа.


### BasicUserInfo

```csharp
public string BasicUserInfo(string token, string address)
```

- Выполняет GraphQL-запрос к API Galxe для получения базовой информации о пользователе.
- **token** — access-token пользователя (обязателен, передаётся в заголовке Authorization)[^1].
- **address** — EVM-адрес пользователя.
- Формирует и отправляет GraphQL-запрос с переменной `address`.
- Возвращает строку-ответ API (JSON) или `null` при ошибке/отсутствии токена.
- Логирует отправленные заголовки, тело запроса и первые 100 символов ответа.


### GetLoyaltyPoints

```csharp
public string GetLoyaltyPoints(string alias, string address)
```

- Выполняет GraphQL-запрос к API Galxe для получения баллов лояльности пользователя в рамках конкретного пространства (space).
- **alias** — alias пространства (например, проекта).
- **address** — EVM-адрес пользователя (в нижнем регистре).
- Формирует и отправляет GraphQL-запрос с переменными `alias` и `address`.
- Возвращает строку-ответ API (JSON) или `null` при ошибке.
- Логирует отправленные заголовки, тело запроса и первые 100 символов ответа.


## Вспомогательные детали

- Используется GraphQL-эндпоинт:
`https://graphigo.prd.galaxy.eco/query`
- Все запросы выполняются через встроенный HTTP-клиент ZennoPoster с поддержкой прокси.
- Для запросов требуется корректный access-token Galxe (получается в личном кабинете пользователя)[^1].
- Все методы поддерживают логирование этапов работы и ошибок.
- Для парсинга задач используется поиск по DOM с разбивкой на секции: Requirements, Tasks, Referral.

