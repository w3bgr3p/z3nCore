# Класс RabbyWallet

Класс `RabbyWallet` обеспечивает автоматизацию работы с расширением браузера Rabby Wallet, Ethereum кошельком с поддержкой множества сетей.

---

## Конструктор

### RabbyWallet

**Назначение**: Инициализирует новый экземпляр класса RabbyWallet со ссылками на проект и конфигурацией кошелька.

**Пример**:
```csharp
var rabby = new RabbyWallet(project, instance, log: true, key: "key");
```

**Разбор**:
```csharp
public RabbyWallet(
    IZennoPosterProjectModel project,                    // Модель проекта ZennoPoster
    Instance instance,                                    // Экземпляр браузера
    bool log = false,                                     // Включить подробное логирование (по умолчанию: false)
    string key = null,                                    // Приватный ключ или "seed" (по умолчанию: null, загружает "evm" ключ из БД)
    string fileName = "Zerion1.21.3.crx"                 // Имя CRX файла расширения (по умолчанию: "Zerion1.21.3.crx")
)
// - Загружает ключ из базы данных, если параметр key равен "key" или "seed"
// - Вычисляет и сохраняет ожидаемый Ethereum адрес из ключа
// - Извлекает пароль устройства из безопасного хранилища
```

---

## Публичные методы

### RabbyLnch

**Назначение**: Запускает расширение Rabby Wallet путем его установки или разблокировки, если оно уже установлено.

**Пример**:
```csharp
var rabby = new RabbyWallet(project, instance);
rabby.RabbyLnch();
```

**Разбор**:
```csharp
public void RabbyLnch(
    string fileName = null,  // Имя CRX файла (по умолчанию: использует значение из конструктора)
    bool log = false         // Включить логирование (по умолчанию: false)
)
// Возвращает: void
// - Включает полную эмуляцию мыши для надежного взаимодействия
// - Переключается на расширение Rabby Wallet
// - Если новая установка: вызывает RabbyImport для импорта кошелька
// - Если уже установлен: вызывает RabbyUnlock для разблокировки
// - Закрывает лишние вкладки
// - Восстанавливает предыдущую настройку эмуляции мыши
```

---

### RabbyImport

**Назначение**: Импортирует кошелек в Rabby используя приватный ключ и устанавливает пароль кошелька.

**Пример**:
```csharp
var rabby = new RabbyWallet(project, instance);
rabby.RabbyImport();
```

**Разбор**:
```csharp
public void RabbyImport(
    bool log = false  // Включить логирование (по умолчанию: false)
)
// Возвращает: void
// - Нажимает кнопку "I already have an address"
// - Выбирает метод импорта приватного ключа (нажимая на иконку ключа)
// - Вводит приватный ключ в поле ввода
// - Нажимает "Confirm" для продолжения
// - Устанавливает пароль кошелька (вводит его дважды)
// - Нажимает "Confirm" для завершения импорта
// - Нажимает "Get Started" для завершения настройки
// - Выбрасывает исключение, если какой-либо шаг не удается
```

---

### RabbyUnlock

**Назначение**: Разблокирует Rabby Wallet используя сохраненный пароль.

**Пример**:
```csharp
var rabby = new RabbyWallet(project, instance);
rabby.RabbyUnlock();
```

**Разбор**:
```csharp
public void RabbyUnlock(
    bool log = false  // Включить логирование (по умолчанию: false)
)
// Возвращает: void
// - Включает полную эмуляцию мыши
// - Проверяет наличие вкладки offscreen.html (фоновая страница)
// - Если вкладка offscreen активна: закрывает ее и переходит на страницу разблокировки
// - Вводит пароль в поле пароля
// - Нажимает кнопку "Unlock"
// - Выбрасывает исключение, если разблокировка не удается
```
